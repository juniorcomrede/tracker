<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INVESTMENT TRACKER</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #000;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }
        h1, h2 {
            text-align: center;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        .green {
            color: green;
            font-weight: bold;
        }
        .red {
            color: red;
            font-weight: bold;
        }
        .net-gain {
            margin-top: 20px;
            font-size: 1.2em;
            text-align: center;
            font-weight: bold;
        }
        .metrics {
            margin-top: 20px;
            font-size: 1.1em;
            text-align: center;
        }
        /* Dark mode styles */
        .dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }
        .dark-mode .container {
            background-color: #1e1e1e;
            color: #e0e0e0;
            box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
        }
        .dark-mode input {
            background-color: #333;
            color: #fff;
            border: 1px solid #555;
        }
        .dark-mode button {
            background-color: #555;
        }
        .dark-mode button:hover {
            background-color: #666;
        }
    </style>
</head>
<body>
    <header>
        <h1>TRADE TRACER</h1>
    </header>
    <div class="container">
        <h2>Add New Trade</h2>
        <div class="form-group">
            <label for="tradeProfit">Trade Profit (%)</label>
            <input type="number" id="tradeProfit" placeholder="Enter profit percentage">
        </div>
        <div class="form-group">
            <label for="tradeNote">Trade Note</label>
            <input type="text" id="tradeNote" placeholder="Enter a brief note (optional)">
        </div>
        <div class="form-group">
            <label for="targetProfit">Target Percentage</label>
            <input type="number" id="targetProfit" placeholder="Enter target percentage (default 5%)">
        </div>
        <button onclick="addTrade()">Add Trade</button>
        <button onclick="togglePrivacyMode()">Privacy Mode</button>
        <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
        <button onclick="exportToCSV()">Export Data as CSV</button>
        <button onclick="importCSV()">Import CSV</button>
      	<button onclick="location.href='CALCULATOR.html';">S-CALC</button>
      	<button onclick="location.href='compund_CALCULATOR.html';">C-CALC</button>
<input type="file" id="importCSVInput" style="display: none;" accept=".csv" onchange="handleFileImport(event)">


        <h2>Filters</h2>
        <div class="form-group">
            <label for="filterProfit">Filter by Profit (%)</label>
            <input type="number" id="filterProfit" placeholder="Enter minimum profit percentage">
        </div>
        <div class="form-group">
            <label for="filterStartDate">Filter Start Date</label>
            <input type="date" id="filterStartDate">
        </div>
        <div class="form-group">
            <label for="filterEndDate">Filter End Date</label>
            <input type="date" id="filterEndDate">
        </div>
        <button onclick="applyFilters()">Apply Filters</button>
        <button onclick="resetFilters()">Reset Filters</button>

        <h2>Trade History</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Date & Time</th>
                    <th>Profit (%)</th>
                    <th>Note</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tradeTable">
                <!-- Trade rows will be dynamically added here -->
            </tbody>
        </table>

        <div class="net-gain" id="netGain">Net Gain: 0%</div>
        <div class="metrics" id="metrics">Average Profit: 0%, Max Profit: 0%, Min Profit: 0%</div>
    </div>

    <script>
        let trades = JSON.parse(localStorage.getItem('trades')) || [];
        let privacyMode = false;

        function addTrade() {
            const tradeProfit = parseFloat(document.getElementById('tradeProfit').value);
            const tradeNote = document.getElementById('tradeNote').value || '';
            const targetProfit = parseFloat(document.getElementById('targetProfit').value) || 5;

            if (isNaN(tradeProfit)) {
                alert('Please enter a valid profit percentage');
                return;
            }

            const dateTime = new Date().toLocaleString();
            const trade = { profit: tradeProfit, note: tradeNote, dateTime, targetProfit };

            if (!privacyMode) {
                trades.push(trade);
                localStorage.setItem('trades', JSON.stringify(trades));
            }

            updateTable();
            updateNetGain();
            updateMetrics();
            document.getElementById('tradeProfit').value = '';
            document.getElementById('tradeNote').value = '';
            document.getElementById('targetProfit').value = '';
        }

        function deleteTrade(index) {
            trades.splice(index, 1);
            localStorage.setItem('trades', JSON.stringify(trades));
            updateTable();
            updateNetGain();
            updateMetrics();
        }

        function updateTable(filteredTrades = trades) {
            const tradeTable = document.getElementById('tradeTable');
            tradeTable.innerHTML = '';

            filteredTrades.forEach((trade, index) => {
                const row = document.createElement('tr');

                const numberCell = document.createElement('td');
                numberCell.textContent = index + 1;
                row.appendChild(numberCell);

                const dateTimeCell = document.createElement('td');
                dateTimeCell.textContent = trade.dateTime;
                row.appendChild(dateTimeCell);

                const profitCell = document.createElement('td');
                profitCell.textContent = privacyMode ? '••••' : trade.profit.toFixed(2) + '%';
                row.appendChild(profitCell);

                const noteCell = document.createElement('td');
                noteCell.textContent = trade.note;
                row.appendChild(noteCell);

                const statusCell = document.createElement('td');
                statusCell.textContent = trade.profit >= trade.targetProfit ? 'Target Hit' : 'Below Target';
                statusCell.className = trade.profit >= trade.targetProfit ? 'green' : 'red';
                row.appendChild(statusCell);

                const actionCell = document.createElement('td');
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => deleteTrade(index);
                actionCell.appendChild(deleteButton);
                row.appendChild(actionCell);

                tradeTable.appendChild(row);
            });
        }

        function updateNetGain() {
            const netGainElement = document.getElementById('netGain');
            if (trades.length === 0) {
                netGainElement.textContent = 'Net Gain: 0%';
                return;
            }

            const netGain = trades.reduce((acc, trade) => acc * (1 + trade.profit / 100), 1) - 1;
            netGainElement.textContent = `Net Gain: ${privacyMode ? '••••' : (netGain * 100).toFixed(2) + '%'} `;
        }

        function updateMetrics() {
            if (trades.length === 0) {
                document.getElementById('metrics').textContent = 'Average Profit: 0%, Max Profit: 0%, Min Profit: 0%';
                return;
            }

            const profits = trades.map(trade => trade.profit);
            const avgProfit = (profits.reduce((a, b) => a + b, 0) / profits.length).toFixed(2);
            const maxProfit = Math.max(...profits).toFixed(2);
            const minProfit = Math.min(...profits).toFixed(2);

            document.getElementById('metrics').textContent = `Average Profit: ${avgProfit}%, Max Profit: ${maxProfit}%, Min Profit: ${minProfit}%`;
        }

        function applyFilters() {
            const minProfit = parseFloat(document.getElementById('filterProfit').value) || -Infinity;
            const startDate = new Date(document.getElementById('filterStartDate').value).getTime() || -Infinity;
            const endDate = new Date(document.getElementById('filterEndDate').value).getTime() || Infinity;

            const filteredTrades = trades.filter(trade => {
                const tradeDate = new Date(trade.dateTime).getTime();
                return trade.profit >= minProfit && tradeDate >= startDate && tradeDate <= endDate;
            });

            updateTable(filteredTrades);
        }

        function resetFilters() {
            document.getElementById('filterProfit').value = '';
            document.getElementById('filterStartDate').value = '';
            document.getElementById('filterEndDate').value = '';
            updateTable();
        }

        function togglePrivacyMode() {
            privacyMode = !privacyMode;
            updateTable();
            updateNetGain();
            updateMetrics();
            alert(privacyMode ? 'Privacy Mode Enabled: Data will be hidden.' : 'Privacy Mode Disabled: Data is visible.');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        function exportToCSV() {
            const csvRows = [
                ["Index", "Date & Time", "Profit (%)", "Note", "Status"]
            ];

            trades.forEach((trade, index) => {
                const status = trade.profit >= trade.targetProfit ? "Target Hit" : "Below Target";
                csvRows.push([index + 1, trade.dateTime, trade.profit.toFixed(2) + "%", trade.note, status]);
            });

            const csvContent = csvRows.map(row => row.join(",")).join("\n");
            const blob = new Blob([csvContent], { type: "text/csv" });
            const url = URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = url;
            a.download = "trade_data.csv";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Load and display trades on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateTable();
            updateNetGain();
            updateMetrics();
        });
    </script>
<script>
    function importCSV() {
        document.getElementById('importCSVInput').click();
    }

    function handleFileImport(event) {
        const file = event.target.files[0];
        if (!file) {
            alert("No file selected.");
            return;
        }

        const reader = new FileReader();
        reader.onload = function (e) {
            const text = e.target.result;
            parseCSV(text);
        };
        reader.readAsText(file);
    }

    function parseCSV(csvText) {
        const rows = csvText.split("\n").slice(1); // Skip the header
        rows.forEach(row => {
            const [index, dateTime, profit, note, status] = row.split(",").map(cell => cell.trim());
            if (dateTime && profit) { // Ensure required fields are present
                trades.push({
                    profit: parseFloat(profit.replace("%", "")) || 0,
                    note: note || "",
                    dateTime: dateTime,
                    targetProfit: 5 // Default target profit
                });
            }
        });
        localStorage.setItem('trades', JSON.stringify(trades));
        updateTable();
        updateNetGain();
        updateMetrics();
        alert("CSV data imported successfully!");
    }
</script>

</body>
</html>
